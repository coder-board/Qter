|版本/类型|作者|参与者|日期|描述|
|:---:|:---:|:---:|:---:|:---:|
|1.0/草稿|Pr0ph3t||2017.11.28|新增首页与用户接口|

# Qter接口

#### 目录:
- [一、备注](#一备注)
  - [1. 接口请求说明](#1-接口请求说明)
  - [2. 请求参数说明](#2-请求参数说明)
- [二、首页部分](#二首页部分)
  - [1. 根据部门年份获取用户列表](#1-根据部门年份获取用户列表)
- [三、用户部分](#三用户部分)
  - [1. 初始化用户界面](#1-初始化用户界面)
  - [2. 修改用户资料](#2-修改用户资料)
- [四、数据统计部分](#四数据统计部分)
  - [1. 根据年份获取就职数据](#1-根据年份获取就职数据)

-------

## 一、备注 ##

##### 1. 接口请求说明 #####

GET参数请放在Url内，如``/api/GetMemberList/12``
接口Url内的{xx}说明xx是get参数应该放的位置

接口调用频率为：100次/分钟

##### 2. 请求参数说明 #####

|参数名|类型|是否必选|说明|
|:---:|:---:|:---:|:---:|
|XXX|string|是|xxxx|

##### 3. 响应参数说明 #####

|返回键|类型|返回值|说明|
|:---:|:---:|:---:|:---:|
|status|string|suceess|返回结果|
|response|object|{xxx}|响应体|

其中response中包含响应数据，具体格式请查看具体接口。

- 不常见Http状态码：

|代号|说明|
|:---:|:---:|
|429|访问太频繁|

- 不常见Http头：

|键|说明|
|:---:|:---:|
|X-RateLimit-Limit|每分钟内允许请求的最大次数|
|X-RateLimit-Remaining|这分钟内允许请求的剩余次数|
|Retry-After|距离下次请求剩余时间(s)|

----

## 二、首页部分 ##

##### 1. 根据部门年份获取用户列表 #####
- 描述：根据部门年份获取用户列表
- 请求地址：`/api/getUserList/{apartment}/{year}`
- 请求方式：get
- 请求参数：
|参数名|类型|是否必选|说明|
|:--:|:--:|:--:|:--:|
|apartment|string|是|要查询的部门|
|year|string|否|默认为最新一年|
- 响应：
|参数名|类型|说明|
|:--:|:--:|:--:|
|x|x|x|
- 响应示例：
```json
{
    "status": "success",
    "response": [
        //TODO
    ]
}
```

----

## 三、用户部分 ##

##### 1. 初始化用户界面 #####
- 描述：初始化用户界面
- 请求地址：`/api/person`
- 请求方式：get
- 请求参数：无
- 响应：
|参数名|类型|说明|
|:--:|:--:|:--:|
|x|x|x|
- 响应示例：
```json
{
    "status": "success",
    "response": {
        "person" : {
          "name" : "Pr0ph3t",
          "position" : "打杂",
          "department" : "研发部"
        }
    }
}
```

##### 2. 修改用户资料 #####
- 描述：修改用户资料
- 请求地址：`/api/person`
- 请求方式：post
- 请求参数：
|参数名|类型|是否必选|说明|
|:-:|:-:|:-:|:-:|
|xx|xx|xx|xx|
- 响应：
|参数名|类型|说明|
|:-:|:-:|:-:|
|x|x|x|
- 响应示例：
```json
{
    "status": "success",
    "response": {
        ""
    }
}
```

-----

## 四、数据统计部分 ##

##### 1. 根据年份获取就职数据 #####
- 描述：根据年份获取就职数据
- 请求地址：`/api/statistics/{year}`
- 请求方式：get
- 请求参数：
|参数名|类型|是否必选|说明|
|:-:|:-:|:-:|:-:|
|year|string|false|默认为最新一届|
- 响应：
|参数名|类型|说明|
|:-:|:-:|:-:|
|rank|array|百分比排行|
|percentages|array|人数排行|
- 响应示例：
```json
{
    "status": "success",
    "response": {
        "rank" : [
          {
            "rating" : "34%",
            "office" : "Tencent",
            "number" : 34
          },
          {
            "rating" : "30%",
            "office" : "Ali",
            "number" : 30
          },
          {
            "rating" : "26%",
            "office" : "Baidu",
            "number" : 26
          }
        ],
        "percentages" : [
          {
            "office" : "Tencent",
            "number" : 34
          },
          {
            "office" : "Ali",
            "number" : 30
          },
          {
            "office" : "Baidu",
            "number" : 26
          },
          {
            "office" : "Microsoft",
            "number" : 10
          }
        ]
    }
}
```
